{% extends "budget/base.html" %}
{% load humanize %}

{% block title %}Family Members{% endblock %}

{% block content %}
<style>
  .members-wrapper {
    margin-top: 20px;
  }
  .member-card {
    border: 1px solid #ddd;
    border-radius: 10px;
    padding: 16px 20px;
    margin-bottom: 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .member-main {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .member-name {
    font-weight: 700;
  }
  .member-username {
    color: #777;
  }
  .member-role {
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 0.8rem;
    background-color: #f1eefc;
    border: 1px solid #d3c9ff;
  }
  .member-money {
    display: flex;
    flex-direction: column;
    text-align: right;
    gap: 4px;
    font-weight: 500;
  }
</style>

<h1>Family Members</h1>

{% if group %}
  <p><strong>Group:</strong> {{ group.name }} (Code: {{ group.code }})</p>

  <div class="members-wrapper">
    {% for member in members %}
      <div class="member-card">
        <div class="member-main">
          <span class="member-name">{{ member.display_name }}</span>
          <span class="member-username">({{ member.username }})</span>
          <span class="member-role">{{ member.role }}</span>
        </div>
        <div class="member-money">
          <span>Income: ${{ member.income|floatformat:0|intcomma }}</span>
          <span>Expenses: ${{ member.expenses|floatformat:0|intcomma }}</span>
        </div>
      </div>
    {% empty %}
      <p>No members in this group yet.</p>
    {% endfor %}
  </div>
{% else %}
  <p>You are not in a family group yet.</p>
{% endif %}
{% endblock %}
