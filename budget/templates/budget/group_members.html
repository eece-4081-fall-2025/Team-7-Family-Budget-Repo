{% extends "budget/base.html" %}
{% load humanize %}
{% block title %}Family Members{% endblock %}
{% block content %}
<div style="max-width: 800px; margin: 40px auto; padding: 20px; background: #f9f9f9; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
  {% if group %}
    <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom: 20px;">
      <h1 style="margin:0;">Family Group: {{ group.name }}</h1>
      <form method="post" action="{% url 'group_leave' %}">
        {% csrf_token %}
        <button type="submit">Leave Group</button>
      </form>
    </div>
    <table style="width: 100%; border-collapse: collapse; font-size: 16px;">
      <thead>
        <tr style="background-color: #ececec;">
          <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ccc;">Member</th>
          <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ccc;">Role</th>
          <th style="padding: 12px; text-align: right; border-bottom: 2px solid #ccc;">Income</th>
          <th style="padding: 12px; text-align: right; border-bottom: 2px solid #ccc;">Expenses</th>
        </tr>
      </thead>
      <tbody>
        {% for m in members %}
        <tr style="border-bottom: 1px solid #ddd;">
          <td style="padding: 10px;">{{ m.username }}</td>
          <td style="padding: 10px;">{{ m.role }}</td>
          <td style="padding: 10px; text-align: right;">${{ m.income|floatformat:2|intcomma }}</td>
          <td style="padding: 10px; text-align: right;">${{ m.expenses|floatformat:2|intcomma }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" style="padding: 20px; text-align: center; color: #666;">No members yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <h2 style="text-align: center;">You are not in a family group.</h2>
    <p style="text-align: center; margin-top: 15px;">
      <a href="{% url 'group_join' %}" style="margin-right: 10px;">Join Group</a> |
      <a href="{% url 'group_create' %}" style="margin-left: 10px;">Create Group</a>
    </p>
  {% endif %}
</div>
{% endblock %}